<!DOCTYPE html>
<html>
<head>
  <title>Scan-Ride Unlock</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin-top: 80px;
    }
    input, button {
      padding: 10px;
      margin: 10px;
      font-size: 16px;
    }
    #status {
      margin-top: 20px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>üîê Enter Passkey to Unlock</h1>
  <input type="password" id="passkey" placeholder="Enter passkey" />
  <button onclick="checkPasskey()">Unlock</button>

  <div id="status"></div>

  <script>
    const correctPasskey = "123456"; // Replace with your real passkey

    function checkPasskey() {
      const input = document.getElementById("passkey").value;
      const statusDiv = document.getElementById("status");

      if (input === correctPasskey) {
        statusDiv.innerText = "‚úÖ Correct passkey! Unlocking...";
        
        // Call ESP32 /unlock endpoint
        fetch("http://192.168.7.59/unlock")  // <-- Replace with your ESP32 IP if different
          .then(res => {
            if (res.ok) {
              statusDiv.innerText += "\nüîì Bike unlocked!";
              setTimeout(() => {
                window.location.href = "map.html"; // Go to next page
              }, 1500);
            } else {
              statusDiv.innerText = "‚ö†Ô∏è Failed to unlock. Try again.";
            }
          })
          .catch(err => {
            statusDiv.innerText = "‚ùå Error connecting to ESP32.";
            console.error(err);
          });
      } else {
        statusDiv.innerText = "‚ùå Incorrect passkey. Try again.";
      }
    }
  </script>
</body>
</html>
